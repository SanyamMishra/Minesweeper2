!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=24)}([function(e,t){e.exports="<div id=game> <template id=main-menu></template> <template id=in-game-menu></template> <template id=pause-button></template> <div id=grids> <template id=small-grid></template> <template id=medium-grid></template> <template id=large-grid></template> </div> <div class=game-counters> <template id=timer></template> <template id=flag-count></template> </div> <template id=game-won-popup></template> <template id=game-lose-popup></template> <template id=bottom-menu></template> </div> "},function(e,t){e.exports="<div class=main-menu> <template id=menu-header></template> <div class=main-menu-controls> <template id=small-grid-button></template> <template id=medium-grid-button></template> <template id=large-grid-button></template> </div> </div> "},function(e,t){e.exports="<div class=menu-logo> MineSweeper </div> "},function(e,t){e.exports="<div class=menu-button> <div class=menu-button--icon> <template id=button-icon></template> </div> <div class=menu-button--text> <template id=button-text></template> </div> </div> "},function(e,t){e.exports="<div class=in-game-menu> <template id=in-game-menu-header></template> <div class=in-game-menu-controls> <template id=resume-button></template> <template id=restart-button></template> <template id=home-button></template> </div> <template id=confirm-restart></template> <template id=confirm-go-to-home></template> </div> "},function(e,t){e.exports="<div class=popup> <div class=popup-modal> <div class=popup-modal--header> <div class=popup-modal--header-text></div> <div class=popup-modal--close-button>X</div> </div> <div class=popup-modal--body></div> <div class=popup-modal--buttons> <template id=popup-button> <div class=popup-modal--button></div> </template> </div> </div> </div> "},function(e,t){e.exports="<div class=corner-button> <div class=corner-button--icon> <template id=button-icon></template> </div> </div> "},function(e,t){e.exports="<div class=grid-holder> <div class=grid></div> </div> "},function(e,t){e.exports='<div class=cell> <div class="cell-border--h cell-border--bottom"></div> <div class="cell-border--v cell-border--right"></div> <div class="cell-icon cell-icon--flag hide"><i class="fas fa-flag"></i></div> <div class="cell-icon cell-icon--mine hide"><i class="fas fa-bomb"></i></div> <div class="cell-mine-count hide"></div> </div> '},function(e,t){e.exports="<div class=game-stat> <div class=stat>0</div> <div class=game-stat--icon> <template id=game-stat-icon></template> </div> </div> "},function(e,t){e.exports="<div class=timer> <div class=timer--minutes>0M</div> <div class=timer--seconds>0S</div> <div class=timer--icon> <template id=timer-icon></template> </div> </div> "},,,function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";function s(e){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}var n,l;i.r(t),function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.RUNNING=1]="RUNNING",e[e.PAUSED=2]="PAUSED",e[e.WON=3]="WON",e[e.LOSE=4]="LOSE"}(n||(n={})),function(e){e[e.STATE_CHANGED=0]="STATE_CHANGED",e[e.MAIN_MENU_BUTTON_CLICKED=1]="MAIN_MENU_BUTTON_CLICKED",e[e.IN_GAME_MENU_BUTTON_CLICKED=2]="IN_GAME_MENU_BUTTON_CLICKED",e[e.CELL_FLAG_TOGGLE=3]="CELL_FLAG_TOGGLE"}(l||(l={}));class a{constructor(){this._state=n.NOT_STARTED,this.eventListeners={}}static getInstance(){return this.instance||(this.instance=new a),this.instance}get state(){return this._state}set state(e){const t=this.state;this._state=e,this.fire(l.STATE_CHANGED,{oldState:t,newState:e})}listen(e,t){this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)}fire(e,t){this.eventListeners[e].forEach(i=>i({event:e,data:t}))}reset(){}}const o=a.getInstance();var r=i(0),h=i.n(r),m=(i(13),i(1)),d=i.n(m),u=(i(14),i(2)),c=i.n(u);i(15);class p{constructor(){this._DOMElement=s(c.a)}get DOMElement(){return this._DOMElement}}var E=i(3),g=i.n(E);i(16);class O{constructor(e,t,i,n){this.text=e,this.callback=t,this.iconClass=i,this.iconSrc=n,this._DOMElement=s(g.a),this.configure(),this.render()}configure(){this.DOMElement.addEventListener("click",this.callback)}render(){var e,t;let i;if(this.iconClass)i=s(`<i class="${this.iconClass}"></i>`);else{if(!this.iconSrc)throw new Error("No valid icon found");i=s(`<img src="${this.iconSrc}"></i>`)}null===(e=this.DOMElement.querySelector("template#button-icon"))||void 0===e||e.replaceWith(i),null===(t=this.DOMElement.querySelector("template#button-text"))||void 0===t||t.replaceWith(this.text)}get DOMElement(){return this._DOMElement}}i.p,i.p;class M{constructor(){this._DOMElement=s(d.a),this.menuHeader=new p,this.smallGridButton=new O("8x8",this.startSmallGame,"fas fa-cube"),this.mediumGridButton=new O("10x10",this.startMediumGame,void 0,"fonts/cube3x.svg"),this.largeGridButton=new O("12x12",this.startLargeGame,void 0,"fonts/cube5x.svg"),this.config(),this.rendor()}config(){o.listen(l.STATE_CHANGED,e=>{e.data.newState===n.NOT_STARTED?this.show():this.hide()})}rendor(){var e,t,i,s;null===(e=this.DOMElement.querySelector("template#menu-header"))||void 0===e||e.replaceWith(this.menuHeader.DOMElement),null===(t=this.DOMElement.querySelector("template#small-grid-button"))||void 0===t||t.replaceWith(this.smallGridButton.DOMElement),null===(i=this.DOMElement.querySelector("template#medium-grid-button"))||void 0===i||i.replaceWith(this.mediumGridButton.DOMElement),null===(s=this.DOMElement.querySelector("template#large-grid-button"))||void 0===s||s.replaceWith(this.largeGridButton.DOMElement)}startSmallGame(){o.fire(l.MAIN_MENU_BUTTON_CLICKED,"smallGridButton")}startMediumGame(){o.fire(l.MAIN_MENU_BUTTON_CLICKED,"mediumGridButton")}startLargeGame(){o.fire(l.MAIN_MENU_BUTTON_CLICKED,"largeGridButton")}get DOMElement(){return this._DOMElement}show(){this.DOMElement.classList.remove("hide")}hide(){this.DOMElement.classList.add("hide")}}var v=i(4),T=i.n(v),f=(i(17),i(5)),D=i.n(f);i(18);class C{constructor(e,t,i){this.title=e,this.content=t,this.buttons=i,this._DOMElement=s(D.a),this.config(),this.render()}config(){var e;null===(e=this.DOMElement.querySelector(".popup-modal--close-button"))||void 0===e||e.addEventListener("click",this.hide.bind(this))}render(){this.DOMElement.querySelector(".popup-modal--header-text").innerHTML=this.title,this.DOMElement.querySelector(".popup-modal--body").innerHTML=this.content;const e=this.DOMElement.querySelector("template#popup-button");this.buttons.forEach(t=>{var i;const s=document.importNode(e.content,!0).firstElementChild;s.innerHTML=t.text,s.addEventListener("click",()=>{this.hide(),t.action&&t.action()}),null===(i=this.DOMElement.querySelector(".popup-modal--buttons"))||void 0===i||i.append(s)})}get DOMElement(){return this._DOMElement}show(){this.DOMElement.classList.remove("hide")}hide(){this.DOMElement.classList.add("hide")}}class S{constructor(){this._DOMElement=s(T.a),this.menuHeader=new p,this.resumeButton=new O("Resume",this.resumeGame.bind(this),"fas fa-play"),this.restartButton=new O("Restart",this.restartGame.bind(this),"fas fa-undo-alt"),this.homeButton=new O("Home",this.goToHome.bind(this),"fas fa-home"),this.restartConfirmPopup=new C("Restart Game","Are you sure? You will lose the current game",[{text:"Yes",action:this.confirmRestartGame},{text:"No"}]),this.goToHomeConfirmPopup=new C("Go to home","Are you sure? You will lose the current game",[{text:"Yes",action:this.confirmGoToHome},{text:"No"}]),this.config(),this.rendor()}config(){o.listen(l.STATE_CHANGED,e=>{e.data.newState===n.PAUSED?this.show():this.hide()})}rendor(){var e,t,i,s,n,l;this.restartConfirmPopup.hide(),this.goToHomeConfirmPopup.hide(),null===(e=this.DOMElement.querySelector("template#in-game-menu-header"))||void 0===e||e.replaceWith(this.menuHeader.DOMElement),null===(t=this.DOMElement.querySelector("template#resume-button"))||void 0===t||t.replaceWith(this.resumeButton.DOMElement),null===(i=this.DOMElement.querySelector("template#restart-button"))||void 0===i||i.replaceWith(this.restartButton.DOMElement),null===(s=this.DOMElement.querySelector("template#home-button"))||void 0===s||s.replaceWith(this.homeButton.DOMElement),null===(n=this.DOMElement.querySelector("template#confirm-restart"))||void 0===n||n.replaceWith(this.restartConfirmPopup.DOMElement),null===(l=this.DOMElement.querySelector("template#confirm-go-to-home"))||void 0===l||l.replaceWith(this.goToHomeConfirmPopup.DOMElement)}resumeGame(){o.state=n.RUNNING}restartGame(){this.restartConfirmPopup.show()}confirmRestartGame(){o.fire(l.IN_GAME_MENU_BUTTON_CLICKED,"restartButton")}goToHome(){this.goToHomeConfirmPopup.show()}confirmGoToHome(){o.fire(l.IN_GAME_MENU_BUTTON_CLICKED,"homeButton")}get DOMElement(){return this._DOMElement}show(){this.DOMElement.classList.remove("hide")}hide(){this.DOMElement.classList.add("hide")}}var _,L=i(6),G=i.n(L);i(19);!function(e){e.TOP_LEFT="top-left",e.TOP_RIGHT="top-right",e.BOTTOM_LEFT="bottom-left",e.BOTTOM_RIGHT="bottom-right"}(_||(_={}));class N{constructor(e,t,i,n){this.corner=e,this.callback=t,this.iconClass=i,this.iconSrc=n,this._DOMElement=s(G.a),this.configure(),this.render()}configure(){this.DOMElement.addEventListener("click",this.callback)}render(){var e;let t;if(this.iconClass)t=s(`<i class="${this.iconClass}"></i>`);else{if(!this.iconSrc)throw new Error("No valid icon found");t=s(`<img src="${this.iconSrc}"></i>`)}null===(e=this.DOMElement.querySelector("template#button-icon"))||void 0===e||e.replaceWith(t),this.DOMElement.classList.add(this.corner)}get DOMElement(){return this._DOMElement}show(){this.DOMElement.classList.remove("hide")}hide(){this.DOMElement.classList.add("hide")}}var w,b,y=i(7),I=i.n(y),B=(i(20),i(8)),A=i.n(B);i(21);!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP=1]="TOP",e[e.TOP_RIGHT=2]="TOP_RIGHT",e[e.LEFT=3]="LEFT",e[e.IN_BETWEEN=4]="IN_BETWEEN",e[e.RIGHT=5]="RIGHT",e[e.BOTTOM_LEFT=6]="BOTTOM_LEFT",e[e.BOTTOM=7]="BOTTOM",e[e.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"}(w||(w={}));class H{constructor(e,t,i){this._x=e,this._y=t,this.cellPosition=i,this._DOMElement=s(A.a),this.borderRightElement=this.DOMElement.querySelector(".cell-border--right"),this.borderBottomElement=this.DOMElement.querySelector(".cell-border--bottom"),this.iconFlagElement=this.DOMElement.querySelector(".cell-icon--flag"),this.iconMineElement=this.DOMElement.querySelector(".cell-icon--mine"),this.mineCountElement=this.DOMElement.querySelector(".cell-mine-count"),this._mined=!1,this._revealed=!1,this._flagged=!1,this._mineCount=0,this.config(),this.render()}config(){o.listen(l.STATE_CHANGED,e=>{e.data.newState!==n.LOSE&&e.data.newState!==n.WON||this.reset()})}render(){switch(this.DOMElement.dataset.x=this.x.toString(),this.DOMElement.dataset.y=this.y.toString(),this.cellPosition){case w.TOP_RIGHT:case w.RIGHT:this.borderRightElement.classList.add("hide");break;case w.BOTTOM_LEFT:case w.BOTTOM:this.borderBottomElement.classList.add("hide");break;case w.BOTTOM_RIGHT:this.borderBottomElement.classList.add("hide"),this.borderRightElement.classList.add("hide")}}get x(){return this._x}get y(){return this._y}get DOMElement(){return this._DOMElement}get mined(){return this._mined}set mined(e){this._mined=e}get flagged(){return this._flagged}set flagged(e){if(!0===e){if(this.revealed||this.flagged)return;this.iconFlagElement.classList.remove("hide"),this._flagged=!0,o.fire(l.CELL_FLAG_TOGGLE,this._flagged)}else{if(!this.flagged)return;this.iconFlagElement.classList.add("hide"),this._flagged=!1,o.fire(l.CELL_FLAG_TOGGLE,this._flagged)}}get mineCount(){return this._mineCount}set mineCount(e){if(!(e>=0))throw new Error("Invalid mine count value");this._mineCount=e}get revealed(){return this._revealed}reveal(e=!1){return this.revealed?-1:!e&&this.flagged?0:(this.mined?(this.iconFlagElement.classList.add("hide"),this.iconMineElement.classList.remove("hide")):(this.mineCount&&(this.mineCountElement.innerHTML=this.mineCount.toString(),this.mineCountElement.classList.remove("hide")),this.DOMElement.classList.add("revealed")),this._revealed=!0,1)}toggleFlag(){this.flagged?this.flagged=!1:this.flagged=!0}equals(e){return this.x===e.x&&this.y===e.y}isNeighbourOf(e){return Math.abs(this.x-e.x)<=1&&Math.abs(this.y-e.y)<=1}reset(){this.iconFlagElement.classList.add("hide"),this.iconMineElement.classList.add("hide"),this.mineCountElement.classList.add("hide"),this.mineCountElement.innerHTML="",this.DOMElement.className="cell",this.mined=!1,this._revealed=!1,this.flagged=!1,this.mineCount=0}}!function(e){e[e.CLICK=0]="CLICK",e[e.CONTEXTMENU=1]="CONTEXTMENU"}(b||(b={}));class x{constructor(e){this._DOMElement=s(I.a),this.gridSize=e.gridSize,this.grid=[...Array(this.gridSize.rowCount)].map((e,t)=>[...Array(this.gridSize.columnCount)].map((e,i)=>new H(t,i,this.getCellPosition(t,i)))),this.totalMines=e.totalMines,this.mineCells=[],this.unrevealedCellsCount=this.gridSize.rowCount*this.gridSize.columnCount,this.revealGapTime=e.mineRevealGapTime,this.config(),this.render()}getCellPosition(e,t){let i;return i=0===e&&0===t?w.TOP_LEFT:0===e&&t!==this.gridSize.columnCount-1?w.TOP:0===e&&t===this.gridSize.columnCount-1?w.TOP_RIGHT:e!==this.gridSize.rowCount-1&&0===t?w.LEFT:e!==this.gridSize.rowCount-1&&t===this.gridSize.columnCount-1?w.RIGHT:e===this.gridSize.rowCount-1&&0===t?w.BOTTOM_LEFT:e===this.gridSize.rowCount-1&&t!==this.gridSize.columnCount-1?w.BOTTOM:e===this.gridSize.rowCount-1&&t===this.gridSize.columnCount-1?w.BOTTOM_RIGHT:w.IN_BETWEEN,i}config(){this.DOMElement.addEventListener("click",e=>{if(!e.target)return;const t=e.target.closest(".cell");t&&this.handleUserInteraction(t,b.CLICK)}),this.DOMElement.addEventListener("contextmenu",e=>{if(e.preventDefault(),!e.target)return;const t=e.target.closest(".cell");t&&this.handleUserInteraction(t,b.CONTEXTMENU)}),o.listen(l.STATE_CHANGED,e=>{e.data.newState!==n.LOSE&&e.data.newState!==n.WON||this.reset()})}render(){const e=this.DOMElement.querySelector(".grid");this.forEachCell(t=>{e.append(t.DOMElement)}),e.style.gridTemplateRows=`repeat(${this.gridSize.rowCount}, 1fr)`,e.style.gridTemplateColumns=`repeat(${this.gridSize.columnCount}, 1fr)`}handleUserInteraction(e,t){if(!e.dataset.x||!e.dataset.y)return;const i=+e.dataset.x,s=+e.dataset.y,l=this.getCell(i,s);o.state===n.RUNNING&&0==this.mineCells.length&&(this.init(l),t=b.CLICK),this.analyseMove(l,t)}init(e){let t=0;for(;t<this.totalMines;){const i=Math.floor(Math.random()*this.gridSize.rowCount),s=Math.floor(Math.random()*this.gridSize.columnCount),n=this.grid[i][s];n.mined||(n.equals(e)||n.isNeighbourOf(e)||(n.mined=!0,this.mineCells.push(n),t++))}this.forEachCell(e=>{let t=0;this.forEachNeighbourhoodCell(e,e=>e.mined?t++:""),e.mineCount=t})}analyseMove(e,t){if(t===b.CLICK){if(1!==e.reveal())return;if(this.unrevealedCellsCount--,e.mined)return this.revealAllMines();e.mineCount||this.forEachNeighbourhoodCell(e,e=>this.analyseMove(e,b.CLICK))}else t===b.CONTEXTMENU&&e.toggleFlag();o.state===n.RUNNING&&this.checkForSuccess()}checkForSuccess(){(this.mineCells.reduce((e,t)=>e?t.flagged:e,!0)||this.unrevealedCellsCount===this.totalMines)&&(o.state=n.WON)}getCell(e,t){return this.grid[e][t]}revealAllMines(){this.mineCells.forEach((e,t,i)=>setTimeout(()=>{1===e.reveal(!0)&&this.unrevealedCellsCount--,t==i.length-1&&(o.state=n.LOSE)},t*this.revealGapTime))}forEachCell(e){this.grid.forEach(t=>{t.forEach(t=>{e(t)})})}forEachNeighbourhoodCell(e,t){const i=0===e.x?0:e.x-1,s=0===e.y?0:e.y-1,n=e.x===this.gridSize.rowCount-1?e.x:e.x+1,l=e.y===this.gridSize.columnCount-1?e.y:e.y+1;for(let a=i;a<=n;a++)for(let i=s;i<=l;i++)a===e.x&&i===e.y||t(this.grid[a][i])}get DOMElement(){return this._DOMElement}show(){this.DOMElement.classList.remove("hide")}hide(){this.DOMElement.classList.add("hide")}reset(){this.mineCells.splice(0),this.unrevealedCellsCount=this.gridSize.rowCount*this.gridSize.columnCount}}var P=i(9),R=i.n(P);i(22);class q{constructor(e,t){this.iconClass=e,this.iconSrc=t,this._DOMElement=s(R.a),this._value=0,this.configure(),this.render()}configure(){o.listen(l.STATE_CHANGED,e=>{console.log(e,n)})}render(){var e;let t;if(this.iconClass)t=s(`<i class="${this.iconClass}"></i>`);else{if(!this.iconSrc)throw new Error("No valid icon found");t=s(`<img src="${this.iconSrc}"></i>`)}null===(e=this.DOMElement.querySelector("template#game-stat-icon"))||void 0===e||e.replaceWith(t)}get value(){return this._value}set value(e){this._value=e,this.DOMElement.querySelector(".stat").innerHTML=String(e)}get DOMElement(){return this._DOMElement}show(){this.DOMElement.classList.remove("hide")}hide(){this.DOMElement.classList.add("hide")}}var U=i(10),W=i.n(U);i(23);class z{constructor(e,t){this.iconClass=e,this.iconSrc=t,this._DOMElement=s(W.a),this.configure(),this.render()}configure(){o.listen(l.STATE_CHANGED,e=>{e.data.newState===n.PAUSED||e.data.newState===n.WON||e.data.newState===n.LOSE?this.pause():e.data.newState===n.RUNNING?e.data.oldState===n.NOT_STARTED?this.start():e.data.oldState===n.PAUSED?this.resume():e.data.oldState===n.LOSE&&(this.stop(),this.start()):e.data.newState===n.NOT_STARTED&&this.stop()})}render(){var e;let t;if(this.iconClass)t=s(`<i class="${this.iconClass}"></i>`);else{if(!this.iconSrc)throw new Error("No valid icon found");t=s(`<img src="${this.iconSrc}"></i>`)}null===(e=this.DOMElement.querySelector("template#timer-icon"))||void 0===e||e.replaceWith(t)}tick(){if(void 0===this.initialTimestamp)return;const e=Date.now(),t=Math.trunc((e-this.initialTimestamp)/1e3),i=Math.trunc(t/60)+"M",s=t%60+"S";this.DOMElement.querySelector(".timer--minutes").innerHTML=i,this.DOMElement.querySelector(".timer--seconds").innerHTML=s}start(){this.initialTimestamp||this.timerId||this.pauseTimestamp||(this.initialTimestamp=Date.now(),this.timerId=setInterval(()=>{this.tick()},1e3),this.tick())}pause(){this.initialTimestamp&&this.timerId&&(clearInterval(this.timerId),this.timerId=void 0,this.pauseTimestamp=Date.now())}resume(){this.initialTimestamp&&!this.timerId&&this.pauseTimestamp&&(this.initialTimestamp+=Date.now()-this.pauseTimestamp,this.pauseTimestamp=void 0,this.timerId=setInterval(()=>{this.tick()},1e3),this.tick())}stop(){clearInterval(this.timerId),this.timerId=void 0,this.initialTimestamp=void 0,this.pauseTimestamp=void 0,this.DOMElement.querySelector(".timer--minutes").innerHTML="0M",this.DOMElement.querySelector(".timer--seconds").innerHTML="0S"}get DOMElement(){return this._DOMElement}show(){this.DOMElement.classList.remove("hide")}hide(){this.DOMElement.classList.add("hide")}}const F={gridSize:{rowCount:8,columnCount:8},totalMines:9,mineRevealGapTime:50},k={gridSize:{rowCount:10,columnCount:10},totalMines:15,mineRevealGapTime:50},K={gridSize:{rowCount:12,columnCount:12},totalMines:25,mineRevealGapTime:50};const $=new class{constructor(){this._DOMElement=s(h.a),this.mainMenu=new M,this.inGameMenu=new S,this.pauseButton=new N(_.TOP_LEFT,this.pauseButtonHandler.bind(this),"fas fa-pause"),this.smallGrid=new x(F),this.mediumGrid=new x(k),this.largeGrid=new x(K),this.timer=new z("fas fa-clock"),this.flagCount=new q("fas fa-flag"),this.gameWonPopup=new C("Congratulations âœ¨ðŸŽŠ","You won the Game!!",[{text:"Cool",action:()=>o.state=n.NOT_STARTED}]),this.gameLosePopup=new C("Oh No ðŸ™","You lose the Game",[{text:"Okay",action:()=>o.state=n.NOT_STARTED}]),this.showGameEndPopup=!0,this.config(),this.render()}config(){this.inGameMenu.hide(),this.pauseButton.hide(),this.smallGrid.hide(),this.mediumGrid.hide(),this.largeGrid.hide(),this.gameWonPopup.hide(),this.gameLosePopup.hide(),o.listen(l.MAIN_MENU_BUTTON_CLICKED,this.mainMenuButtonsHandler.bind(this)),o.listen(l.IN_GAME_MENU_BUTTON_CLICKED,this.inGameMenuButtonsHandler.bind(this)),o.listen(l.STATE_CHANGED,e=>{e.data.newState===n.NOT_STARTED?(this.smallGrid.hide(),this.mediumGrid.hide(),this.largeGrid.hide()):e.data.newState===n.WON?this.showGameEndPopup&&this.gameWonPopup.show():e.data.newState===n.LOSE&&this.showGameEndPopup&&this.gameLosePopup.show()}),o.listen(l.CELL_FLAG_TOGGLE,e=>{!1===e.data?this.flagCount.value++:!0===e.data&&this.flagCount.value--})}render(){var e,t,i,s,n,l,a,o,r,h;null===(e=this.DOMElement.querySelector("template#main-menu"))||void 0===e||e.replaceWith(this.mainMenu.DOMElement),null===(t=this.DOMElement.querySelector("template#in-game-menu"))||void 0===t||t.replaceWith(this.inGameMenu.DOMElement),null===(i=this.DOMElement.querySelector("template#pause-button"))||void 0===i||i.replaceWith(this.pauseButton.DOMElement),null===(s=this.DOMElement.querySelector("template#small-grid"))||void 0===s||s.replaceWith(this.smallGrid.DOMElement),null===(n=this.DOMElement.querySelector("template#medium-grid"))||void 0===n||n.replaceWith(this.mediumGrid.DOMElement),null===(l=this.DOMElement.querySelector("template#large-grid"))||void 0===l||l.replaceWith(this.largeGrid.DOMElement),null===(a=this.DOMElement.querySelector("template#timer"))||void 0===a||a.replaceWith(this.timer.DOMElement),null===(o=this.DOMElement.querySelector("template#flag-count"))||void 0===o||o.replaceWith(this.flagCount.DOMElement),null===(r=this.DOMElement.querySelector("template#game-won-popup"))||void 0===r||r.replaceWith(this.gameWonPopup.DOMElement),null===(h=this.DOMElement.querySelector("template#game-lose-popup"))||void 0===h||h.replaceWith(this.gameLosePopup.DOMElement)}mainMenuButtonsHandler(e){switch(o.state=n.RUNNING,this.pauseButton.show(),e.data){case"smallGridButton":this.flagCount.value=F.totalMines,this.smallGrid.show();break;case"mediumGridButton":this.flagCount.value=k.totalMines,this.mediumGrid.show();break;case"largeGridButton":this.flagCount.value=K.totalMines,this.largeGrid.show()}}inGameMenuButtonsHandler(e){this.showGameEndPopup=!1,o.state=n.LOSE,"restartButton"===e.data?o.state=n.RUNNING:"homeButton"===e.data&&(o.state=n.NOT_STARTED),this.showGameEndPopup=!0}pauseButtonHandler(){o.state=n.PAUSED}get DOMElement(){return this._DOMElement}};document.body.append($.DOMElement)}]);