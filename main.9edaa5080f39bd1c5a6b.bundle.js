!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=20)}([function(e,t){e.exports="<div id=game> <template id=main-menu></template> <template id=in-game-menu></template> <template id=pause-button></template> <div id=grids> <template id=small-grid></template> <template id=medium-grid></template> <template id=large-grid></template> </div> <template id=game-won-popup></template> <template id=game-lose-popup></template> <template id=bottom-menu></template> </div> "},function(e,t){e.exports="<div class=main-menu> <template id=menu-header></template> <div class=main-menu-controls> <template id=small-grid-button></template> <template id=medium-grid-button></template> <template id=large-grid-button></template> </div> </div> "},function(e,t){e.exports="<div class=menu-logo> MinesWeepeR </div> "},function(e,t){e.exports="<div class=menu-button> <div class=menu-button--icon> <template id=button-icon></template> </div> <div class=menu-button--text> <template id=button-text></template> </div> </div> "},function(e,t){e.exports="<div class=in-game-menu> <template id=menu-header></template> <div class=in-game-menu-controls> <template id=resume-button></template> <template id=restart-button></template> <template id=home-button></template> </div> <template id=confirm-restart></template> <template id=confirm-go-to-home></template> </div> "},function(e,t){e.exports="<div class=popup> <div class=popup-modal> <div class=popup-modal--header> <div class=popup-modal--header-text></div> <div class=popup-modal--close-button>X</div> </div> <div class=popup-modal--body></div> <div class=popup-modal--buttons> <template id=popup-button> <div class=popup-modal--button></div> </template> </div> </div> </div> "},function(e,t){e.exports="<div class=corner-button> <div class=corner-button--icon> <template id=button-icon></template> </div> </div> "},function(e,t){e.exports="<div class=grid-holder> <div class=grid></div> </div> "},function(e,t){e.exports='<div class=cell> <div class="cell-border--h cell-border--bottom"></div> <div class="cell-border--v cell-border--right"></div> <div class="cell-icon cell-icon--flag hide"><i class="fas fa-flag"></i></div> <div class="cell-icon cell-icon--mine hide"><i class="fas fa-bomb"></i></div> <div class="cell-mine-count hide"></div> </div> '},,,function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";function n(e){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}var s,l;i.r(t),function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.RUNNING=1]="RUNNING",e[e.PAUSED=2]="PAUSED",e[e.WON=3]="WON",e[e.LOSE=4]="LOSE"}(s||(s={})),function(e){e[e.STATE_CHANGED=0]="STATE_CHANGED",e[e.MAIN_MENU_BUTTON_CLICKED=1]="MAIN_MENU_BUTTON_CLICKED",e[e.IN_GAME_MENU_BUTTON_CLICKED=2]="IN_GAME_MENU_BUTTON_CLICKED"}(l||(l={}));class o{constructor(){this._state=s.NOT_STARTED,this.eventListeners={}}static getInstance(){return this.instance||(this.instance=new o),this.instance}get state(){return this._state}set state(e){const t=this.state;this._state=e,this.fire(l.STATE_CHANGED,{oldState:t,newState:e})}listen(e,t){this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)}fire(e,t){this.eventListeners[e].forEach(i=>i({event:e,data:t}))}reset(){}}const r=o.getInstance();var a=i(0),h=i.n(a),d=(i(11),i(1)),m=i.n(d),u=(i(12),i(2)),c=i.n(u);i(13);class p{constructor(){this._DOMElement=n(c.a)}get DOMElement(){return this._DOMElement}}var E=i(3),g=i.n(E);i(14);class M{constructor(e,t,i,s){this.text=e,this.callback=t,this.iconClass=i,this.iconSrc=s,this._DOMElement=n(g.a),this.configure(),this.render()}configure(){this.DOMElement.addEventListener("click",this.callback)}render(){var e,t;let i;if(this.iconClass)i=n(`<i class="${this.iconClass}"></i>`);else{if(!this.iconSrc)throw new Error("No valid icon found");i=n(`<img src="${this.iconSrc}"></i>`)}null===(e=this.DOMElement.querySelector("template#button-icon"))||void 0===e||e.replaceWith(i),null===(t=this.DOMElement.querySelector("template#button-text"))||void 0===t||t.replaceWith(this.text)}get DOMElement(){return this._DOMElement}}i.p,i.p;class O{constructor(){this._DOMElement=n(m.a),this.menuHeader=new p,this.smallGridButton=new M("8x8",this.startSmallGame,"fas fa-cube"),this.mediumGridButton=new M("10x10",this.startMediumGame,void 0,"/fonts/cube3x.svg"),this.largeGridButton=new M("12x12",this.startLargeGame,void 0,"/fonts/cube5x.svg"),this.config(),this.rendor()}config(){r.listen(l.STATE_CHANGED,e=>{e.data.newState===s.NOT_STARTED?this.show():this.hide()})}rendor(){var e,t,i,n;null===(e=this.DOMElement.querySelector("template#menu-header"))||void 0===e||e.replaceWith(this.menuHeader.DOMElement),null===(t=this.DOMElement.querySelector("template#small-grid-button"))||void 0===t||t.replaceWith(this.smallGridButton.DOMElement),null===(i=this.DOMElement.querySelector("template#medium-grid-button"))||void 0===i||i.replaceWith(this.mediumGridButton.DOMElement),null===(n=this.DOMElement.querySelector("template#large-grid-button"))||void 0===n||n.replaceWith(this.largeGridButton.DOMElement)}startSmallGame(){r.fire(l.MAIN_MENU_BUTTON_CLICKED,"smallGridButton")}startMediumGame(){r.fire(l.MAIN_MENU_BUTTON_CLICKED,"mediumGridButton")}startLargeGame(){r.fire(l.MAIN_MENU_BUTTON_CLICKED,"largeGridButton")}get DOMElement(){return this._DOMElement}show(){this.DOMElement.classList.remove("hide")}hide(){this.DOMElement.classList.add("hide")}}var T=i(4),f=i.n(T),v=(i(15),i(5)),C=i.n(v);i(16);class D{constructor(e,t,i){this.title=e,this.content=t,this.buttons=i,this._DOMElement=n(C.a),this.config(),this.render()}config(){var e;null===(e=this.DOMElement.querySelector(".popup-modal--close-button"))||void 0===e||e.addEventListener("click",this.hide.bind(this))}render(){this.DOMElement.querySelector(".popup-modal--header-text").innerHTML=this.title,this.DOMElement.querySelector(".popup-modal--body").innerHTML=this.content;const e=this.DOMElement.querySelector("template#popup-button");this.buttons.forEach(t=>{var i;const n=document.importNode(e.content,!0).firstElementChild;n.innerHTML=t.text,n.addEventListener("click",()=>{this.hide(),t.action&&t.action()}),null===(i=this.DOMElement.querySelector(".popup-modal--buttons"))||void 0===i||i.append(n)})}get DOMElement(){return this._DOMElement}show(){this.DOMElement.classList.remove("hide")}hide(){this.DOMElement.classList.add("hide")}}class _{constructor(){this._DOMElement=n(f.a),this.menuHeader=new p,this.resumeButton=new M("ResuMe",this.resumeGame.bind(this),"fas fa-play"),this.restartButton=new M("RestARt",this.restartGame.bind(this),"fas fa-undo-alt"),this.homeButton=new M("HoMe",this.goToHome.bind(this),"fas fa-home"),this.restartConfirmPopup=new D("RestARt GAMe","ARe you suRe? you Will lose tHe cuRRent GAMe",[{text:"yes",action:this.confirmRestartGame},{text:"no"}]),this.goToHomeConfirmPopup=new D("Go to HoMe","ARe you suRe? you Will lose tHe cuRRent GAMe",[{text:"yes",action:this.confirmGoToHome},{text:"no"}]),this.config(),this.rendor()}config(){r.listen(l.STATE_CHANGED,e=>{e.data.newState===s.PAUSED?this.show():this.hide()})}rendor(){var e,t,i,n,s,l;this.restartConfirmPopup.hide(),this.goToHomeConfirmPopup.hide(),null===(e=this.DOMElement.querySelector("template#in-game-menu-header"))||void 0===e||e.replaceWith(this.menuHeader.DOMElement),null===(t=this.DOMElement.querySelector("template#resume-button"))||void 0===t||t.replaceWith(this.resumeButton.DOMElement),null===(i=this.DOMElement.querySelector("template#restart-button"))||void 0===i||i.replaceWith(this.restartButton.DOMElement),null===(n=this.DOMElement.querySelector("template#home-button"))||void 0===n||n.replaceWith(this.homeButton.DOMElement),null===(s=this.DOMElement.querySelector("template#confirm-restart"))||void 0===s||s.replaceWith(this.restartConfirmPopup.DOMElement),null===(l=this.DOMElement.querySelector("template#confirm-go-to-home"))||void 0===l||l.replaceWith(this.goToHomeConfirmPopup.DOMElement)}resumeGame(){r.state=s.RUNNING}restartGame(){this.restartConfirmPopup.show()}confirmRestartGame(){r.fire(l.IN_GAME_MENU_BUTTON_CLICKED,"restartButton")}goToHome(){this.goToHomeConfirmPopup.show()}confirmGoToHome(){r.fire(l.IN_GAME_MENU_BUTTON_CLICKED,"homeButton")}get DOMElement(){return this._DOMElement}show(){this.DOMElement.classList.remove("hide")}hide(){this.DOMElement.classList.add("hide")}}var S,N=i(6),G=i.n(N);i(17);!function(e){e.TOP_LEFT="top-left",e.TOP_RIGHT="top-right",e.BOTTOM_LEFT="bottom-left",e.BOTTOM_RIGHT="bottom-right"}(S||(S={}));class b{constructor(e,t,i,s){this.corner=e,this.callback=t,this.iconClass=i,this.iconSrc=s,this._DOMElement=n(G.a),this.configure(),this.render()}configure(){this.DOMElement.addEventListener("click",this.callback)}render(){var e;let t;if(this.iconClass)t=n(`<i class="${this.iconClass}"></i>`);else{if(!this.iconSrc)throw new Error("No valid icon found");t=n(`<img src="${this.iconSrc}"></i>`)}null===(e=this.DOMElement.querySelector("template#button-icon"))||void 0===e||e.replaceWith(t),this.DOMElement.classList.add(this.corner)}get DOMElement(){return this._DOMElement}show(){this.DOMElement.classList.remove("hide")}hide(){this.DOMElement.classList.add("hide")}}var L,y,w=i(7),B=i.n(w),I=(i(18),i(8)),A=i.n(I);i(19);!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP=1]="TOP",e[e.TOP_RIGHT=2]="TOP_RIGHT",e[e.LEFT=3]="LEFT",e[e.IN_BETWEEN=4]="IN_BETWEEN",e[e.RIGHT=5]="RIGHT",e[e.BOTTOM_LEFT=6]="BOTTOM_LEFT",e[e.BOTTOM=7]="BOTTOM",e[e.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"}(L||(L={}));class R{constructor(e,t,i){this._x=e,this._y=t,this.cellPosition=i,this._DOMElement=n(A.a),this.borderRightElement=this.DOMElement.querySelector(".cell-border--right"),this.borderBottomElement=this.DOMElement.querySelector(".cell-border--bottom"),this.iconFlagElement=this.DOMElement.querySelector(".cell-icon--flag"),this.iconMineElement=this.DOMElement.querySelector(".cell-icon--mine"),this.mineCountElement=this.DOMElement.querySelector(".cell-mine-count"),this._mined=!1,this._revealed=!1,this._flagged=!1,this._mineCount=0,this.config(),this.render()}config(){r.listen(l.STATE_CHANGED,e=>{e.data.newState!==s.LOSE&&e.data.newState!==s.WON||this.reset()})}render(){switch(this.DOMElement.dataset.x=this.x.toString(),this.DOMElement.dataset.y=this.y.toString(),this.cellPosition){case L.TOP_RIGHT:case L.RIGHT:this.borderRightElement.classList.add("hide");break;case L.BOTTOM_LEFT:case L.BOTTOM:this.borderBottomElement.classList.add("hide");break;case L.BOTTOM_RIGHT:this.borderBottomElement.classList.add("hide"),this.borderRightElement.classList.add("hide")}}get x(){return this._x}get y(){return this._y}get DOMElement(){return this._DOMElement}get mined(){return this._mined}set mined(e){this._mined=e}get flagged(){return this._flagged}set flagged(e){if(!0===e){if(this.revealed||this.flagged)return;this.iconFlagElement.classList.remove("hide"),this._flagged=!0}else{if(!this.flagged)return;this.iconFlagElement.classList.add("hide"),this._flagged=!1}}get mineCount(){return this._mineCount}set mineCount(e){if(!(e>=0))throw new Error("Invalid mine count value");this._mineCount=e}get revealed(){return this._revealed}reveal(e=!1){return this.revealed?-1:!e&&this.flagged?0:(this.mined?(this.iconFlagElement.classList.add("hide"),this.iconMineElement.classList.remove("hide")):(this.mineCount&&(this.mineCountElement.innerHTML=this.mineCount.toString(),this.mineCountElement.classList.remove("hide")),this.DOMElement.classList.add("revealed")),this._revealed=!0,1)}toggleFlag(){this.flagged?this.flagged=!1:this.flagged=!0}equals(e){return this.x===e.x&&this.y===e.y}isNeighbourOf(e){return Math.abs(this.x-e.x)<=1&&Math.abs(this.y-e.y)<=1}reset(){this.iconFlagElement.classList.add("hide"),this.iconMineElement.classList.add("hide"),this.mineCountElement.classList.add("hide"),this.mineCountElement.innerHTML="",this.DOMElement.className="cell",this.mined=!1,this._revealed=!1,this.flagged=!1,this.mineCount=0}}!function(e){e[e.CLICK=0]="CLICK",e[e.CONTEXTMENU=1]="CONTEXTMENU"}(y||(y={}));class H{constructor(e){this._DOMElement=n(B.a),this.gridSize=e.gridSize,this.grid=[...Array(this.gridSize.rowCount)].map((e,t)=>[...Array(this.gridSize.columnCount)].map((e,i)=>new R(t,i,this.getCellPosition(t,i)))),this.totalMines=e.totalMines,this.mineCells=[],this.unrevealedCellsCount=this.gridSize.rowCount*this.gridSize.columnCount,this.revealGapTime=e.mineRevealGapTime,this.config(),this.render()}getCellPosition(e,t){let i;return i=0===e&&0===t?L.TOP_LEFT:0===e&&t!==this.gridSize.columnCount-1?L.TOP:0===e&&t===this.gridSize.columnCount-1?L.TOP_RIGHT:e!==this.gridSize.rowCount-1&&0===t?L.LEFT:e!==this.gridSize.rowCount-1&&t===this.gridSize.columnCount-1?L.RIGHT:e===this.gridSize.rowCount-1&&0===t?L.BOTTOM_LEFT:e===this.gridSize.rowCount-1&&t!==this.gridSize.columnCount-1?L.BOTTOM:e===this.gridSize.rowCount-1&&t===this.gridSize.columnCount-1?L.BOTTOM_RIGHT:L.IN_BETWEEN,i}config(){this.DOMElement.addEventListener("click",e=>{if(!e.target)return;const t=e.target.closest(".cell");t&&this.handleUserInteraction(t,y.CLICK)}),this.DOMElement.addEventListener("contextmenu",e=>{if(e.preventDefault(),!e.target)return;const t=e.target.closest(".cell");t&&this.handleUserInteraction(t,y.CONTEXTMENU)}),r.listen(l.STATE_CHANGED,e=>{e.data.newState!==s.LOSE&&e.data.newState!==s.WON||this.reset()})}render(){const e=this.DOMElement.querySelector(".grid");this.forEachCell(t=>{e.append(t.DOMElement)}),e.style.gridTemplateRows=`repeat(${this.gridSize.rowCount}, 1fr)`,e.style.gridTemplateColumns=`repeat(${this.gridSize.columnCount}, 1fr)`}handleUserInteraction(e,t){if(!e.dataset.x||!e.dataset.y)return;const i=+e.dataset.x,n=+e.dataset.y,l=this.getCell(i,n);r.state===s.RUNNING&&0==this.mineCells.length&&(this.init(l),t=y.CLICK),this.analyseMove(l,t)}init(e){let t=0;for(;t<this.totalMines;){const i=Math.floor(Math.random()*this.gridSize.rowCount),n=Math.floor(Math.random()*this.gridSize.columnCount),s=this.grid[i][n];s.mined||(s.equals(e)||s.isNeighbourOf(e)||(s.mined=!0,this.mineCells.push(s),t++))}this.forEachCell(e=>{let t=0;this.forEachNeighbourhoodCell(e,e=>e.mined?t++:""),e.mineCount=t})}analyseMove(e,t){if(t===y.CLICK){if(1!==e.reveal())return;if(this.unrevealedCellsCount--,e.mined)return this.revealAllMines();e.mineCount||this.forEachNeighbourhoodCell(e,e=>this.analyseMove(e,y.CLICK))}else t===y.CONTEXTMENU&&e.toggleFlag();r.state===s.RUNNING&&this.checkForSuccess()}checkForSuccess(){(this.mineCells.reduce((e,t)=>e?t.flagged:e,!0)||this.unrevealedCellsCount===this.totalMines)&&(r.state=s.WON)}getCell(e,t){return this.grid[e][t]}revealAllMines(){this.mineCells.forEach((e,t,i)=>setTimeout(()=>{1===e.reveal(!0)&&this.unrevealedCellsCount--,t==i.length-1&&(r.state=s.LOSE)},t*this.revealGapTime))}forEachCell(e){this.grid.forEach(t=>{t.forEach(t=>{e(t)})})}forEachNeighbourhoodCell(e,t){const i=0===e.x?0:e.x-1,n=0===e.y?0:e.y-1,s=e.x===this.gridSize.rowCount-1?e.x:e.x+1,l=e.y===this.gridSize.columnCount-1?e.y:e.y+1;for(let o=i;o<=s;o++)for(let i=n;i<=l;i++)o===e.x&&i===e.y||t(this.grid[o][i])}get DOMElement(){return this._DOMElement}show(){this.DOMElement.classList.remove("hide")}hide(){this.DOMElement.classList.add("hide")}reset(){this.mineCells.splice(0),this.unrevealedCellsCount=this.gridSize.rowCount*this.gridSize.columnCount}}const x={gridSize:{rowCount:8,columnCount:8},totalMines:9,mineRevealGapTime:50},P={gridSize:{rowCount:10,columnCount:10},totalMines:15,mineRevealGapTime:50},U={gridSize:{rowCount:12,columnCount:12},totalMines:25,mineRevealGapTime:50};const W=new class{constructor(){this._DOMElement=n(h.a),this.mainMenu=new O,this.inGameMenu=new _,this.pauseButton=new b(S.TOP_LEFT,this.pauseButtonHandler.bind(this),"fas fa-pause"),this.smallGrid=new H(x),this.mediumGrid=new H(P),this.largeGrid=new H(U),this.gameWonPopup=new D("Won","you Won tHe GAMe!! ✨🎊",[{text:"cool",action:()=>r.state=s.NOT_STARTED}]),this.gameLosePopup=new D("lose","you lose tHe GAMe 🙁",[{text:"okAy",action:()=>r.state=s.NOT_STARTED}]),this.showGameEndPopup=!0,this.config(),this.render()}config(){this.inGameMenu.hide(),this.pauseButton.hide(),this.smallGrid.hide(),this.mediumGrid.hide(),this.largeGrid.hide(),this.gameWonPopup.hide(),this.gameLosePopup.hide(),r.listen(l.MAIN_MENU_BUTTON_CLICKED,this.mainMenuButtonsHandler.bind(this)),r.listen(l.IN_GAME_MENU_BUTTON_CLICKED,this.inGameMenuButtonsHandler.bind(this)),r.listen(l.STATE_CHANGED,e=>{e.data.newState===s.NOT_STARTED?(this.smallGrid.hide(),this.mediumGrid.hide(),this.largeGrid.hide()):e.data.newState===s.WON?this.showGameEndPopup&&this.gameWonPopup.show():e.data.newState===s.LOSE&&this.showGameEndPopup&&this.gameLosePopup.show()})}render(){var e,t,i,n,s,l,o,r;null===(e=this.DOMElement.querySelector("template#main-menu"))||void 0===e||e.replaceWith(this.mainMenu.DOMElement),null===(t=this.DOMElement.querySelector("template#in-game-menu"))||void 0===t||t.replaceWith(this.inGameMenu.DOMElement),null===(i=this.DOMElement.querySelector("template#pause-button"))||void 0===i||i.replaceWith(this.pauseButton.DOMElement),null===(n=this.DOMElement.querySelector("template#small-grid"))||void 0===n||n.replaceWith(this.smallGrid.DOMElement),null===(s=this.DOMElement.querySelector("template#medium-grid"))||void 0===s||s.replaceWith(this.mediumGrid.DOMElement),null===(l=this.DOMElement.querySelector("template#large-grid"))||void 0===l||l.replaceWith(this.largeGrid.DOMElement),null===(o=this.DOMElement.querySelector("template#game-won-popup"))||void 0===o||o.replaceWith(this.gameWonPopup.DOMElement),null===(r=this.DOMElement.querySelector("template#game-lose-popup"))||void 0===r||r.replaceWith(this.gameLosePopup.DOMElement)}mainMenuButtonsHandler(e){switch(r.state=s.RUNNING,this.pauseButton.show(),e.data){case"smallGridButton":this.smallGrid.show();break;case"mediumGridButton":this.mediumGrid.show();break;case"largeGridButton":this.largeGrid.show()}}inGameMenuButtonsHandler(e){this.showGameEndPopup=!1,r.state=s.LOSE,"restartButton"===e.data?r.state=s.RUNNING:"homeButton"===e.data&&(r.state=s.NOT_STARTED),this.showGameEndPopup=!0}pauseButtonHandler(){r.state=s.PAUSED}get DOMElement(){return this._DOMElement}};document.body.append(W.DOMElement)}]);